<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Preferences</title>
  <style>
    :root {
      --bg-color: #1e1e1e;
      --text-color: #ffffff;
      --secondary-text: #cccccc;
      --card-bg: #2e2e2e;
      --divider: #333;
      --accent: orange;
      --header-bg: #2e7d32;
    }

    body.light {
      --bg-color: #f9f9f9;
      --text-color: #111111;
      --secondary-text: #555555;
      --card-bg: #ffffff;
      --divider: #ddd;
      --accent: #2e7d32;
      --header-bg: #4caf50;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: background 0.3s, color 0.3s;
    }

    header {
      background-color: var(--header-bg);
      padding: 16px;
      display: flex;
      align-items: center;
    }

    header h1 {
      font-size: 20px;
      margin: 0;
      margin-left: 16px;
    }

    .back-arrow {
      font-size: 20px;
      cursor: pointer;
      color: var(--text-color);
    }

    .container {
      padding: 16px;
    }

    h2.section-title {
      font-size: 18px;
      margin: 20px 0 10px;
      color: var(--accent);
    }

    .option {
      margin-bottom: 20px;
      cursor: pointer;
    }

    .option-title {
      font-size: 16px;
      font-weight: bold;
      color: var(--text-color);
    }

    .option-description {
      font-size: 14px;
      color: var(--secondary-text);
      margin-top: 4px;
    }

    .divider {
      border-bottom: 1px solid var(--divider);
      margin: 10px 0;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 40px;
      height: 20px;
      float: right;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0;
      right: 0; bottom: 0;
      background-color: #888;
      transition: .4s;
      border-radius: 20px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 16px; width: 16px;
      left: 2px; bottom: 2px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: var(--accent);
    }

    input:checked + .slider:before {
      transform: translateX(20px);
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 10;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.6);
    }

    .modal-content {
      background-color: var(--card-bg);
      margin: 30% auto;
      padding: 20px;
      border-radius: 8px;
      width: 90%;
      max-width: 400px;
      color: var(--text-color);
      transition: background 0.3s, color 0.3s;
    }

    .modal-content h2 {
      margin-top: 0;
      margin-bottom: 10px;
      font-size: 18px;
    }

    .modal-footer {
      text-align: right;
      margin-top: 10px;
    }

    .cancel-button, .confirm-button {
      color: var(--accent);
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
      margin-left: 10px;
    }

    .radio-group label {
      display: block;
      margin: 10px 0;
      font-size: 16px;
      cursor: pointer;
    }

    .radio-group input[type="radio"] {
      margin-right: 8px;
    }
  </style>
</head>
<body>
  <header>
    <span class="back-arrow" onclick="history.back()">&#8592;</span>
    <h1>Preferences</h1>
  </header>

  <div class="container">
    <!-- General Preferences -->
    <!-- <h2 class="section-title">General Preferences</h2>
    <div class="option" onclick="toggleCheckbox('themeToggle')">
      <div class="option-title">
        Dark Mode
        <label class="toggle-switch">
          <input type="checkbox" id="themeToggle" onchange="toggleTheme()">
          <span class="slider"></span>
        </label>
      </div>
      <div class="option-description">Enable dark mode for the app interface</div>
    </div>
    <div class="divider"></div>

    <div class="option" onclick="toggleCheckbox('notificationsToggle')">
      <div class="option-title">
        Notifications
        <label class="toggle-switch">
          <input type="checkbox" id="notificationsToggle" onchange="toggleState('notifications')">
          <span class="slider"></span>
        </label>
      </div>
      <div class="option-description">Receive alerts about account activity and updates</div>
    </div>
    <div class="divider"></div> -->

    <!-- Transaction Preferences -->
    <h2 class="section-title">Transaction Preferences</h2>
    <div class="option" onclick="openTransactionTypeModal()">
      <div class="option-title">Default Transaction Type</div>
      <div class="option-description" id="transactionTypeDisplay">Debit</div>
    </div>
    <div class="divider"></div>

    <div class="option" onclick="toggleCheckbox('doubleEntryToggle')">
      <div class="option-title">
        Activate Double Entry
        <label class="toggle-switch">
          <input type="checkbox" id="doubleEntryToggle" onchange="toggleState('doubleEntry')">
          <span class="slider"></span>
        </label>
      </div>
      <div class="option-description">All transactions will be a transfer from one account to another</div>
    </div>
    <div class="divider"></div>

    <div class="option" onclick="toggleCheckbox('compactViewToggle')">
      <div class="option-title">
        Enable compact view
        <label class="toggle-switch">
          <input type="checkbox" id="compactViewToggle" onchange="toggleState('compactView')">
          <span class="slider"></span>
        </label>
      </div>
      <div class="option-description">Enable to always use compact view for transactions list</div>
    </div>
    <div class="divider"></div>

    <div class="option" onclick="toggleCheckbox('openingBalanceToggle')">
      <div class="option-title">
        Save account opening balances
        <label class="toggle-switch">
          <input type="checkbox" id="openingBalanceToggle" onchange="toggleState('openingBalance')">
          <span class="slider"></span>
        </label>
      </div>
      <div class="option-description">Save current balance as new opening balance after deleting transactions</div>
    </div>
    <div class="divider"></div>

    <div class="option">
      <div class="option-title" style="cursor: pointer;" onclick="openDeleteModal()">
        Delete all transactions
      </div>
      <div class="option-description">All transactions in all accounts will be deleted!</div>
    </div>
  </div>

  <!-- Transaction Type Modal -->
  <div id="transactionTypeModal" class="modal">
    <div class="modal-content">
      <h2>Default Transaction Type</h2>
      <form class="radio-group">
        <label><input type="radio" name="transactionType" value="Credit"> Credit</label>
        <label><input type="radio" name="transactionType" value="Debit" checked> Debit</label>
      </form>
      <div class="modal-footer">
        <span class="cancel-button" onclick="closeTransactionTypeModal()">CANCEL</span>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div id="deleteModal" class="modal">
    <div class="modal-content">
      <h2>Confirm delete</h2>
      <p>Are you sure you want to delete ALL transactions?</p>
      <label><input type="checkbox" id="confirmDeleteCheckbox"> Yes, I'm sure</label>
      <div class="modal-footer">
        <span class="cancel-button" onclick="closeDeleteModal()">CANCEL</span>
        <span class="confirm-button" onclick="deleteTransactions()" id="deleteButton" style="opacity:0.5;pointer-events:none;">DELETE</span>
      </div>
    </div>
  </div>

  <script>
    const transactionTypeModal = document.getElementById('transactionTypeModal');
    const transactionTypeDisplay = document.getElementById('transactionTypeDisplay');
    const deleteModal = document.getElementById('deleteModal');
    const confirmDeleteCheckbox = document.getElementById('confirmDeleteCheckbox');
    const deleteButton = document.getElementById('deleteButton');

    // Open/close modals
    function openTransactionTypeModal() { transactionTypeModal.style.display = 'block'; }
    function closeTransactionTypeModal() { transactionTypeModal.style.display = 'none'; }
    function openDeleteModal() { deleteModal.style.display = 'block'; }
    function closeDeleteModal() {
      deleteModal.style.display = 'none';
      confirmDeleteCheckbox.checked = false;
      deleteButton.style.opacity = 0.5;
      deleteButton.style.pointerEvents = 'none';
    }

    // Transaction type
    document.querySelectorAll('input[name="transactionType"]').forEach((elem) => {
      elem.addEventListener('change', function(event) {
        transactionTypeDisplay.textContent = event.target.value;
        closeTransactionTypeModal();
      });
    });

    // Delete confirmation
    confirmDeleteCheckbox.addEventListener('change', function() {
      deleteButton.style.opacity = this.checked ? 1 : 0.5;
      deleteButton.style.pointerEvents = this.checked ? 'auto' : 'none';
    });

    function deleteTransactions() {
      alert("All transactions have been deleted.");
      closeDeleteModal();
    }

    // Toggle states
    function toggleState(setting) {
      const toggle = document.getElementById(setting + 'Toggle');
      console.log(`${setting} is now ${toggle.checked ? 'enabled' : 'disabled'}`);
    }
    function toggleCheckbox(id) {
      const checkbox = document.getElementById(id);
      checkbox.checked = !checkbox.checked;
      checkbox.dispatchEvent(new Event('change'));
    }

    // Theme toggle
    function toggleTheme() {
      document.body.classList.toggle('light');
      console.log("Theme switched to " + (document.body.classList.contains('light') ? "Light" : "Dark"));
    }
  </script>
</body>
</html>
